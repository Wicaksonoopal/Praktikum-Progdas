<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Tic-Tac-Toe</title>
    <style>
        /* CSS untuk tampilan game */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
        }

        h1 {
            color: #333;
        }

        #game-board {
            display: grid;
            /* Membuat 3 kolom, masing-masing 100px */
            grid-template-columns: repeat(3, 100px);
            /* Membuat 3 baris, masing-masing 100px */
            grid-template-rows: repeat(3, 100px);
            gap: 5px; /* Jarak antar kotak */
            background-color: #333;
            border: 5px solid #333;
        }

        .cell {
            width: 100px;
            height: 100px;
            background-color: #fff;
            border: 1px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3em; /* Ukuran font 'X' dan 'O' */
            font-weight: bold;
            cursor: pointer;
            user-select: none; /* Mencegah teks terseleksi */
        }

        .cell:hover {
            background-color: #eee;
        }

        /* Warna untuk 'X' dan 'O' */
        .cell.x {
            color: #007bff; /* Biru */
        }

        .cell.o {
            color: #dc3545; /* Merah */
        }

        #status {
            margin-top: 20px;
            font-size: 1.5em;
            color: #444;
        }

        #restartButton {
            margin-top: 15px;
            padding: 10px 20px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
            background-color: #28a745; /* Hijau */
            color: white;
            cursor: pointer;
        }

        #restartButton:hover {
            background-color: #218838;
        }
    </style>
</head>
<body>

    <h1>Tic-Tac-Toe</h1>

    <div id="game-board">
        <div class="cell" data-index="0"></div>
        <div class="cell" data-index="1"></div>
        <div class="cell" data-index="2"></div>
        <div class="cell" data-index="3"></div>
        <div class="cell" data-index="4"></div>
        <div class="cell" data-index="5"></div>
        <div class="cell" data-index="6"></div>
        <div class="cell" data-index="7"></div>
        <div class="cell" data-index="8"></div>
    </div>

    <h2 id="status">Giliran Pemain X</h2>

    <button id="restartButton">Mulai Ulang</button>

    <script>
        // JavaScript untuk logika game

        // Ambil elemen dari HTML
        const statusDisplay = document.querySelector('#status');
        const cells = document.querySelectorAll('.cell');
        const restartButton = document.querySelector('#restartButton');

        // Variabel status game
        let gameActive = true;
        let currentPlayer = 'X';
        // 'boardState' melacak status setiap kotak (kosong, X, atau O)
        let boardState = ["", "", "", "", "", "", "", "", ""];

        // Kondisi untuk menang (8 kemungkinan)
        const winningConditions = [
            [0, 1, 2], // Baris 1
            [3, 4, 5], // Baris 2
            [6, 7, 8], // Baris 3
            [0, 3, 6], // Kolom 1
            [1, 4, 7], // Kolom 2
            [2, 5, 8], // Kolom 3
            [0, 4, 8], // Diagonal 1
            [2, 4, 6]  // Diagonal 2
        ];

        // Fungsi yang dijalankan saat kotak diklik
        function handleCellClick(event) {
            const clickedCell = event.target;
            // Ambil 'data-index' dari kotak yang diklik
            const clickedCellIndex = parseInt(clickedCell.getAttribute('data-index'));

            // Cek apakah kotak sudah diisi atau game sudah selesai
            if (boardState[clickedCellIndex] !== "" || !gameActive) {
                return; // Hentikan fungsi jika ya
            }

            // Jika valid, update papan dan cek hasil
            updateCell(clickedCell, clickedCellIndex);
            checkResult();
        }

        // Fungsi untuk mengisi kotak dan update 'boardState'
        function updateCell(cell, index) {
            boardState[index] = currentPlayer;
            cell.innerHTML = currentPlayer;
            // Tambahkan kelas CSS 'x' atau 'o' untuk warna
            cell.classList.add(currentPlayer.toLowerCase());
        }

        // Fungsi untuk ganti pemain
        function changePlayer() {
            // Ganti pemain dari X ke O, atau O ke X
            currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            statusDisplay.innerHTML = `Giliran Pemain ${currentPlayer}`;
        }

        // Fungsi untuk mengecek pemenang atau seri
        function checkResult() {
            let roundWon = false;
            // Loop melalui semua 'winningConditions'
            for (let i = 0; i < winningConditions.length; i++) {
                const winCondition = winningConditions[i];
                let a = boardState[winCondition[0]];
                let b = boardState[winCondition[1]];
                let c = boardState[winCondition[2]];

                // Jika salah satu kotak di kondisi menang masih kosong, lanjut
                if (a === '' || b === '' || c === '') {
                    continue;
                }
                // Jika ketiga kotak sama
                if (a === b && b === c) {
                    roundWon = true; // Ada pemenang
                    break;
                }
            }

            // Jika ada pemenang
            if (roundWon) {
                statusDisplay.innerHTML = `Pemain ${currentPlayer} Menang! ðŸ†`;
                gameActive = false; // Hentikan game
                return;
            }

            // Cek apakah papan sudah penuh (Seri)
            let roundDraw = !boardState.includes("");
            if (roundDraw) {
                statusDisplay.innerHTML = 'Game Seri! ðŸ¤';
                gameActive = false; // Hentikan game
                return;
            }

            // Jika tidak ada pemenang dan tidak seri, ganti pemain
            changePlayer();
        }

        // Fungsi untuk memulai ulang game
        function handleRestartGame() {
            gameActive = true;
            currentPlayer = 'X';
            boardState = ["", "", "", "", "", "", "", "", ""];
            statusDisplay.innerHTML = `Giliran Pemain ${currentPlayer}`;
            // Kosongkan semua kotak di tampilan
            cells.forEach(cell => {
                cell.innerHTML = "";
                cell.classList.remove('x', 'o'); // Hapus kelas warna
            });
        }

        // Tambahkan 'event listener' (pendengar aksi) ke setiap kotak dan tombol
        cells.forEach(cell => cell.addEventListener('click', handleCellClick));
        restartButton.addEventListener('click', handleRestartGame);

    </script>
</body>
</html>